---
title: '矛盾剧场：如何用 n8n 编排一场 AI 之间的"人性修罗场"?'
date: 2025-01-27T10:13:11+08:00
tags:
- n8n
- ai
- nodejs
- lowcode
categories:
- ai
comment: true
---

> 我们为什么痴迷于深度访谈和辩论节目？
>
> 不是为了听那点结论，而是为了看**冲突**。看立场鲜明的人如何为了捍卫底线而针锋相对，看逻辑在情绪的边缘反复横跳，看一个精英如何被剥开伪善的外衣。
>
> 最近，我在我的"节点解剖室"里，用 n8n 搭建了一个名为 **《矛盾剧场》** 的自动化工作流。我给它的指令很简单：输入一条社会热点新闻，它就能自动选角、编排脚本、并驱动多名 AI Agent 完成一场长达 12 分钟、剑拔弩张的深度对谈。
>
> 这不是一场温和的座谈会，而是一场精心设计的"数字修罗场"。

## 第一幕：选角导演的"人性嗅觉"

一场好戏，一半的功劳在于选角。

在工作流的起点，我配置了一个名为 `Role Director`（选角导演）的节点。它不找那些随大流的评论员，它只找这三类人：

1. **利益相关者 (The Stakeholder)**：处于风暴中心，观点基于生存与情感。
2. **道德批判者 (The Moral Critic)**：规则与传统的捍卫者，观点基于秩序与是非。
3. **解构者 (The Deconstructor)**：冷酷的学术机器，用社会学或心理学拆解一切。

最有趣的一点是：我要求导演给每位嘉宾设计一个 **"人性弱点" (Human Flaw)**。比如一个傲慢的 HRD 极度渴望被认可，或者一个解构主义者私下里却有严重的焦虑。这，就是后续"破防"高潮的伏笔。

## 第二幕：编剧的"插话协议"

如果 AI 只是轮流说话，那叫"做报告"。真实的冲突充满了**打断、抢话和逻辑碾压**。

核心节点 `Executive Director`（执行导演）负责生成一份多达 40 多个单元的"脚本清单"。它将节目分为三个阶段：

* **Round 1：** 价值观碰撞，维持基本的体面。
* **Round 2：** 深度博弈，引入敏感细节，开始**暴力插话**。
* **Round 3：** 心理攻防，集中火力围攻某人的"人性弱点"，制造破防。

我在这里设计了一个**插话协议（Interruption Protocol）**。如果脚本标记为 `being_interrupted`，当前 Agent 说话说到一半会被强制截断（以"——"结尾），而下一个 `interrupting` 的 Agent 会瞬间切入，不给对方喘息的机会。

## 第三幕：逻辑的循环与生产

为了支撑这个漫长的对谈，我在 n8n 中使用了一系列 JavaScript 节点来管理**"状态"**。

这就像是一个大脑的循环系统：

1. **Pre Parser**：提取当前该谁说话，对方是谁，未来的剧情走向是什么。
2. **Lines Generator**：调用 Gemini 3 Pro 注入灵魂。它会带入人设、参考历史对白，并根据"演戏提示"决定是该怜悯地嘲讽，还是愤怒地反击。
3. **Post Parser**：清洗台词，更新对话历史，并将索引推向下一行。

为了保证节目的记忆不丢失，我接入了 **Supabase** 作为持久化数据库。即使工作流运行中途断掉，我也能通过 UUID 随时恢复这一场的"演员记忆"。

## 终幕：不欢而散的"金句"

节目不会以和稀泥告终。在工作流的末尾，我会让总编剧给出一个"不欢而散"的离场描述，并生成一句点题金句。

最后，我调用了`Nano Banana` 的生图节点，根据整场访谈的核心冲突，为我的公众号生成一张极具视觉冲击力的封面图。

## 写在最后

在折腾这个工作流的过程中，最让我兴奋的不是 AI 表现得多么"聪明"，而是它们在特定的规则束缚下（如插话协议、弱点设计），表现出了某种 **"数字人性"**。

以前做技术支持，是排查故障（Troubleshooting）；现在做 AI 编排，是设计冲突（Designing Conflict）。这种从"逻辑维护者"到"戏剧架构师"的转变，或许正是我们在云原生和 AI 时代最有意思的跨界。

如果你也对如何用 n8n 驱动这种复杂的多 Agent 协作感兴趣，欢迎在评论区交流。我们下个"节点"见。

附整体流程图：

![n8n-workflow](assets/n8n_workflow_intervew.jpg)